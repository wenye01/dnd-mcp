# DND MCP æ•´ä½“æ¶æ„è®¾è®¡æ–‡æ¡£

## æ–‡æ¡£ä¿¡æ¯

- **ç‰ˆæœ¬**: v1.0
- **åˆ›å»ºæ—¥æœŸ**: 2025-02-12
- **è®¾è®¡èŒƒå›´**: DND MCP ç³»ç»Ÿæ•´ä½“æ¶æ„ï¼ˆClient + Serverï¼‰

---

## ä¸€ã€ç³»ç»Ÿå®šä½

### 1.1 æ ¸å¿ƒç†å¿µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚   MCP Server = å¯å¤ç”¨çš„ D&D æ¸¸æˆå¼•æ“ï¼ˆè§„åˆ™ + çŠ¶æ€ + åœ°å›¾ï¼‰       â”‚
â”‚   MCP Client = é¢å‘ç”¨æˆ·çš„åè°ƒå±‚ï¼ˆå¯¹è¯ + AIç¼–æ’ + å‰ç«¯APIï¼‰       â”‚
â”‚                                                                 â”‚
â”‚   è®¾è®¡ç›®æ ‡:                                                     â”‚
â”‚     1. Server å¯è¢«ä»»ä½• MCP Client å¤ç”¨                          â”‚
â”‚     2. ç”¨æˆ·é€šè¿‡è‡ªç„¶è¯­è¨€ä¸ AI DM äº¤äº’                            â”‚
â”‚     3. AI è°ƒç”¨ Server å·¥å…·æ‰§è¡Œæ¸¸æˆè§„åˆ™                          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              å‰ç«¯                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚ HTTP/WebSocket
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          MCP Client                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚   â”‚ ä¼šè¯ç®¡ç†  â”‚  â”‚ å¯¹è¯ç¼–æ’  â”‚  â”‚ LLMè°ƒç”¨  â”‚  â”‚ å®æ—¶æ¨é€  â”‚              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚   å­˜å‚¨: Session(ä¼šè¯) + Message(å¯¹è¯å†å²)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚ MCP Protocol
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          MCP Server                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚   â”‚ è§’è‰²ç³»ç»Ÿ  â”‚  â”‚ éª°å­/è§„åˆ™ â”‚  â”‚ æˆ˜æ–—ç³»ç»Ÿ  â”‚  â”‚ åœ°å›¾ç³»ç»Ÿ  â”‚              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚   å­˜å‚¨: Character(è§’è‰²) + Combat(æˆ˜æ–—) + Map(åœ°å›¾) + GameState(çŠ¶æ€)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äºŒã€ç»„ä»¶èŒè´£åˆ’åˆ†

### 2.1 èŒè´£çŸ©é˜µ

| èŒè´£ | Client | Server |
|------|:------:|:------:|
| ç”¨æˆ·ä¼šè¯ï¼ˆæˆ˜å½¹ï¼‰ç®¡ç† | âœ… | âŒ |
| å¯¹è¯å†å²å­˜å‚¨ | âœ… | âŒ |
| LLM è°ƒç”¨ä¸ç¼–æ’ | âœ… | âŒ |
| WebSocket æ¨é€ | âœ… | âŒ |
| è§’è‰²æ•°æ®ç®¡ç† | âŒ | âœ… |
| æˆ˜æ–—çŠ¶æ€ç®¡ç† | âŒ | âœ… |
| éª°å­/è§„åˆ™è®¡ç®— | âŒ | âœ… |
| åœ°å›¾æ•°æ®ç®¡ç† | âŒ | âœ… |
| æ¸¸æˆä¸–ç•ŒçŠ¶æ€ | âŒ | âœ… |

### 2.2 æ•°æ®å­˜å‚¨åˆ†ç¦»

```
Client å­˜å‚¨:
  â”œâ”€ client_sessions    ä¼šè¯å…ƒæ•°æ®ï¼ˆåç§°ã€åˆ›å»ºè€…ã€å…³è”çš„Serverï¼‰
  â””â”€ client_messages    å¯¹è¯å†å²ï¼ˆç”¨äºLLMä¸Šä¸‹æ–‡ï¼‰

Server å­˜å‚¨:
  â”œâ”€ characters         è§’è‰²å¡ï¼ˆå±æ€§ã€æŠ€èƒ½ã€è£…å¤‡ï¼‰
  â”œâ”€ combats            æˆ˜æ–—çŠ¶æ€ï¼ˆå‚ä¸è€…ã€å›åˆã€æ—¥å¿—ï¼‰
  â”œâ”€ maps               åœ°å›¾æ•°æ®ï¼ˆå¤§åœ°å›¾ã€æˆ˜æ–—åœ°å›¾ï¼‰
  â”œâ”€ locations          ä½ç½®å…³è”ï¼ˆè§’è‰²å½“å‰åœ¨å“ªå¼ åœ°å›¾çš„å“ªä¸ªä½ç½®ï¼‰
  â””â”€ game_states        æ¸¸æˆçŠ¶æ€ï¼ˆæ—¶é—´ã€å¤©æ°”ã€äº‹ä»¶ï¼‰
```

---

## ä¸‰ã€Server æ ¸å¿ƒæ¨¡å—

### 3.1 æ¨¡å—æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       MCP Server Modules                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ­ è§’è‰²ç³»ç»Ÿ                                                    â”‚
â”‚     è§’è‰²åˆ›å»ºã€å±æ€§ç®¡ç†ã€HP/çŠ¶æ€ã€è£…å¤‡ç‰©å“                        â”‚
â”‚                                                                 â”‚
â”‚  ğŸ² è§„åˆ™ç³»ç»Ÿ                                                    â”‚
â”‚     éª°å­æŠ•æ·ã€å±æ€§æ£€å®šã€DCè®¡ç®—ã€è§„åˆ™æŸ¥è¯¢                         â”‚
â”‚                                                                 â”‚
â”‚  âš”ï¸ æˆ˜æ–—ç³»ç»Ÿ                                                    â”‚
â”‚     æˆ˜æ–—å‘èµ·ã€å…ˆæ”»æ’åºã€å›åˆç®¡ç†ã€ä¼¤å®³åº”ç”¨                       â”‚
â”‚                                                                 â”‚
â”‚  ğŸ—ºï¸ åœ°å›¾ç³»ç»Ÿ                                                    â”‚
â”‚     å¤§åœ°å›¾ç®¡ç†ã€æˆ˜æ–—åœ°å›¾ç®¡ç†ã€ä½ç½®è¿½è¸ªã€ç§»åŠ¨                     â”‚
â”‚                                                                 â”‚
â”‚  ğŸŒ çŠ¶æ€ç³»ç»Ÿ                                                    â”‚
â”‚     æ¸¸æˆæ—¶é—´ã€å¤©æ°”ã€NPCçŠ¶æ€ã€äº‹ä»¶è®°å½•                            â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 åœ°å›¾ç³»ç»Ÿè®¾è®¡

#### 3.2.1 åŒåœ°å›¾æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        åŒåœ°å›¾è®¾è®¡                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    ğŸ—ºï¸ å¤§åœ°å›¾ (World Map)                â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  ç”¨é€”:                                                   â”‚   â”‚
â”‚  â”‚    â”œâ”€ å±•ç¤ºæ•´ä¸ªæ•…äº‹ä¸–ç•Œ/å¤§é™†                              â”‚   â”‚
â”‚  â”‚    â”œâ”€ è¿½è¸ªé˜Ÿä¼çš„å¤§è‡´ä½ç½®                                 â”‚   â”‚
â”‚  â”‚    â”œâ”€ åŸé•‡/åœ°æ ‡/é“è·¯ å…³è”                                â”‚   â”‚
â”‚  â”‚    â””â”€ æ—…è¡Œç§»åŠ¨ã€èƒŒæ™¯å™äº‹                                 â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  ç‰¹ç‚¹:                                                   â”‚   â”‚
â”‚  â”‚    â”œâ”€ é€šå¸¸ä¸è¿›è¡Œæˆ˜æ–—                                     â”‚   â”‚
â”‚  â”‚    â”œâ”€ ä¾§é‡ä½ç½®æ ‡è®°å’Œç§»åŠ¨                                 â”‚   â”‚
â”‚  â”‚    â””â”€ å…³è”å¯è¿›å…¥çš„æˆ˜æ–—åœ°å›¾                               â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  æ ¼å¼: UVTT (é€šç”¨è™šæ‹Ÿæ¡Œé¢æ ¼å¼)                           â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚                          â†“ è¿›å…¥åœ°ç‚¹                             â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                  âš”ï¸ æˆ˜æ–—åœ°å›¾ (Battle Map)                â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  ç”¨é€”:                                                   â”‚   â”‚
â”‚  â”‚    â”œâ”€ è¯¦ç»†çš„åœºæ™¯åœ°å›¾ï¼ˆæˆ¿é—´ã€åœ°ç‰¢ã€è¥åœ°ç­‰ï¼‰                â”‚   â”‚
â”‚  â”‚    â”œâ”€ æˆ˜æ–—é­é‡                                           â”‚   â”‚
â”‚  â”‚    â”œâ”€ ç²¾ç¡®çš„ä½ç½®è¿½è¸ªï¼ˆæ ¼å­/è·ç¦»ï¼‰                         â”‚   â”‚
â”‚  â”‚    â””â”€ æˆ˜æœ¯ç§»åŠ¨                                           â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  ç‰¹ç‚¹:                                                   â”‚   â”‚
â”‚  â”‚    â”œâ”€ æ”¯æŒæˆ˜æ–—                                           â”‚   â”‚
â”‚  â”‚    â”œâ”€ æ ¼å­åŒ–ï¼ˆ5ftä¸€æ ¼ï¼‰                                  â”‚   â”‚
â”‚  â”‚    â”œâ”€ åœ°å½¢æ•ˆæœï¼ˆå›°éš¾åœ°å½¢ã€æ©æŠ¤ç­‰ï¼‰                        â”‚   â”‚
â”‚  â”‚    â””â”€ å¯æ”¾ç½®Tokenï¼ˆè§’è‰²ã€æ•Œäººã€ç‰©å“ï¼‰                     â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  æ ¼å¼: UVTT (é€šç”¨è™šæ‹Ÿæ¡Œé¢æ ¼å¼)                           â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.2.2 åœ°å›¾å…³è”å…³ç³»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       åœ°å›¾å±‚çº§å…³ç³»                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   å¤§é™†å¤§åœ°å›¾     â”‚
                    â”‚  (World Map)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                 â”‚                 â”‚
           â–¼                 â–¼                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  å¸ƒé›·é•‡    â”‚    â”‚  å¹½æš—æ£®æ—   â”‚    â”‚  çŸ®äººçŸ¿å‘   â”‚
    â”‚ (åœ°ç‚¹æ ‡è®°) â”‚    â”‚ (åœ°ç‚¹æ ‡è®°)  â”‚    â”‚ (åœ°ç‚¹æ ‡è®°)  â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
          â”‚                 â”‚                 â”‚
          â–¼                 â–¼                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ è·ƒé©¬æ—…åº—    â”‚    â”‚ æ£®æ—ç©ºåœ°   â”‚    â”‚ çŸ¿å‘å…¥å£   â”‚
    â”‚ (æˆ˜æ–—åœ°å›¾) â”‚    â”‚ (æˆ˜æ–—åœ°å›¾)  â”‚    â”‚ (æˆ˜æ–—åœ°å›¾)  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


æ•°æ®ç»“æ„:

  world_map (å¤§åœ°å›¾):
    {
      "id": "map-world-001",
      "name": "ä¸­åœŸå¤§é™†",
      "type": "world",
      "uvtt_data": { ... },           // UVTT æ ¼å¼æ•°æ®
      "locations": [                   // å¯è¿›å…¥çš„åœ°ç‚¹
        { "id": "loc-bree", "name": "å¸ƒé›·é•‡", "position": {"x": 120, "y": 80} },
        { "id": "loc-forest", "name": "å¹½æš—æ£®æ—", "position": {"x": 200, "y": 150} }
      ]
    }

  battle_map (æˆ˜æ–—åœ°å›¾):
    {
      "id": "map-battle-001",
      "name": "è·ƒé©¬æ—…åº—å¤§å…",
      "type": "battle",
      "parent_location": "loc-bree",   // å…³è”çš„å¤§åœ°å›¾åœ°ç‚¹
      "uvtt_data": { ... },            // UVTT æ ¼å¼æ•°æ®ï¼ˆå«æ ¼å­ã€å¢™å£ç­‰ï¼‰
      "grid_size": 5,                  // æ¯æ ¼ 5 è‹±å°º
      "tokens": [                      // å½“å‰æ”¾ç½®çš„ Token
        { "id": "char-abc", "position": {"x": 3, "y": 5} }
      ]
    }
```

#### 3.2.3 åœ°å›¾å·¥å…·å®šä¹‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      åœ°å›¾ç›¸å…³ MCP Tools                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ—ºï¸ å¤§åœ°å›¾å·¥å…·                                                  â”‚
â”‚                                                                 â”‚
â”‚  get_world_map                                                   â”‚
â”‚    è·å–å¤§åœ°å›¾æ•°æ®åŠé˜Ÿä¼å½“å‰ä½ç½®                                  â”‚
â”‚    è¿”å›: åœ°å›¾æ•°æ®ã€ä½ç½®æ ‡è®°ã€å¯è¿›å…¥åœ°ç‚¹åˆ—è¡¨                      â”‚
â”‚                                                                 â”‚
â”‚  travel_to                                                       â”‚
â”‚    åœ¨å¤§åœ°å›¾ä¸Šç§»åŠ¨åˆ°æŒ‡å®šåœ°ç‚¹                                      â”‚
â”‚    å‚æ•°: destination_id, travel_mode (walk/horse/ship)          â”‚
â”‚    è¿”å›: ç§»åŠ¨ç»“æœã€æ¶ˆè€—æ—¶é—´ã€é€”ä¸­äº‹ä»¶                            â”‚
â”‚                                                                 â”‚
â”‚  get_location_info                                               â”‚
â”‚    è·å–å¤§åœ°å›¾ä¸ŠæŸä¸ªåœ°ç‚¹çš„è¯¦ç»†ä¿¡æ¯                                â”‚
â”‚    è¿”å›: åœ°ç‚¹æè¿°ã€å…³è”çš„æˆ˜æ–—åœ°å›¾ã€NPCåˆ—è¡¨                       â”‚
â”‚                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                 â”‚
â”‚  âš”ï¸ æˆ˜æ–—åœ°å›¾å·¥å…·                                                â”‚
â”‚                                                                 â”‚
â”‚  enter_battle_map                                                â”‚
â”‚    è¿›å…¥æˆ˜æ–—åœ°å›¾ï¼ˆä»å¤§åœ°å›¾åœ°ç‚¹ï¼‰                                  â”‚
â”‚    å‚æ•°: location_id, battle_map_id                             â”‚
â”‚    è¿”å›: åœ°å›¾æ•°æ®ã€åˆå§‹ä½ç½®                                      â”‚
â”‚                                                                 â”‚
â”‚  get_battle_map                                                  â”‚
â”‚    è·å–å½“å‰æˆ˜æ–—åœ°å›¾çš„å®Œæ•´çŠ¶æ€                                    â”‚
â”‚    è¿”å›: åœ°å›¾æ•°æ®ã€æ‰€æœ‰Tokenä½ç½®ã€åœ°å½¢ä¿¡æ¯                       â”‚
â”‚                                                                 â”‚
â”‚  move_token                                                      â”‚
â”‚    ç§»åŠ¨Tokenåˆ°æ–°ä½ç½®                                             â”‚
â”‚    å‚æ•°: token_id, target_position, check_difficult_terrain     â”‚
â”‚    è¿”å›: ç§»åŠ¨ç»“æœã€æ¶ˆè€—ç§»åŠ¨åŠ›ã€è§¦å‘æ•ˆæœ                          â”‚
â”‚                                                                 â”‚
â”‚  exit_battle_map                                                 â”‚
â”‚    ç¦»å¼€æˆ˜æ–—åœ°å›¾ï¼Œè¿”å›å¤§åœ°å›¾                                      â”‚
â”‚    è¿”å›: æ›´æ–°åçš„å¤§åœ°å›¾çŠ¶æ€                                      â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.2.4 UVTT æ ¼å¼è¯´æ˜

```
UVTT (Universal Virtual Tabletop) æ ¼å¼:

  é€šç”¨è™šæ‹Ÿæ¡Œé¢åœ°å›¾æ ¼å¼ï¼Œæ”¯æŒ:
    â”œâ”€ å›¾åƒæ•°æ® (base64 æˆ– URL)
    â”œâ”€ ç½‘æ ¼é…ç½® (å°ºå¯¸ã€åç§»)
    â”œâ”€ å¢™å£/éšœç¢ç‰©
    â”œâ”€ å…‰æº
    â”œâ”€ åŒºåŸŸæ ‡è®°
    â””â”€ ç«¯å£ä¼ é€ç‚¹

  Server çš„ä½¿ç”¨æ–¹å¼:
    â”œâ”€ å¯¼å…¥ UVTT æ–‡ä»¶åˆ›å»ºåœ°å›¾
    â”œâ”€ è§£æå¹¶å­˜å‚¨å…³é”®æ•°æ®
    â”œâ”€ æä¾›ç»™å‰ç«¯æ¸²æŸ“
    â””â”€ ç”¨äºä½ç½®è®¡ç®—å’Œç¢°æ’æ£€æµ‹
```

---

## å››ã€Server MCP Tools æ€»è§ˆ

### 4.1 å·¥å…·æ¸…å•

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MCP Tools æ¸…å•                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ­ è§’è‰²ç³»ç»Ÿ                                                    â”‚
â”‚     create_character      åˆ›å»ºè§’è‰²                              â”‚
â”‚     get_character         è·å–è§’è‰²                              â”‚
â”‚     modify_hp             ä¿®æ”¹ç”Ÿå‘½å€¼                            â”‚
â”‚     apply_condition       åº”ç”¨çŠ¶æ€æ•ˆæœ                          â”‚
â”‚                                                                 â”‚
â”‚  ğŸ² è§„åˆ™ç³»ç»Ÿ                                                    â”‚
â”‚     roll_dice             æŠ•æ·éª°å­                              â”‚
â”‚     roll_check            å±æ€§/æŠ€èƒ½æ£€å®š                         â”‚
â”‚     roll_attack           æ”»å‡»æ£€å®š                              â”‚
â”‚     lookup_spell          æŸ¥è¯¢æ³•æœ¯                              â”‚
â”‚     lookup_condition      æŸ¥è¯¢çŠ¶æ€                              â”‚
â”‚                                                                 â”‚
â”‚  âš”ï¸ æˆ˜æ–—ç³»ç»Ÿ                                                    â”‚
â”‚     start_combat          å¼€å§‹æˆ˜æ–—                              â”‚
â”‚     get_combat_state      è·å–æˆ˜æ–—çŠ¶æ€                          â”‚
â”‚     next_turn             ä¸‹ä¸€å›åˆ                              â”‚
â”‚     end_combat            ç»“æŸæˆ˜æ–—                              â”‚
â”‚                                                                 â”‚
â”‚  ğŸ—ºï¸ åœ°å›¾ç³»ç»Ÿ                                                    â”‚
â”‚     get_world_map         è·å–å¤§åœ°å›¾                            â”‚
â”‚     travel_to             å¤§åœ°å›¾ç§»åŠ¨                            â”‚
â”‚     enter_battle_map      è¿›å…¥æˆ˜æ–—åœ°å›¾                          â”‚
â”‚     get_battle_map        è·å–æˆ˜æ–—åœ°å›¾çŠ¶æ€                      â”‚
â”‚     move_token            ç§»åŠ¨Token                             â”‚
â”‚     exit_battle_map       ç¦»å¼€æˆ˜æ–—åœ°å›¾                          â”‚
â”‚                                                                 â”‚
â”‚  ğŸŒ çŠ¶æ€ç³»ç»Ÿ                                                    â”‚
â”‚     get_game_state        è·å–æ¸¸æˆçŠ¶æ€                          â”‚
â”‚     set_location          è®¾ç½®å½“å‰ä½ç½®                          â”‚
â”‚     advance_time          æ¨è¿›æ¸¸æˆæ—¶é—´                          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 å®Œæ•´æ¸¸æˆæµç¨‹ç¤ºä¾‹

#### 4.2.1 æµç¨‹æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         å®Œæ•´æ¸¸æˆç”Ÿå‘½å‘¨æœŸ                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  é˜¶æ®µ1: DM åˆ›å»ºæˆ˜å½¹                                                     â”‚
â”‚    DM åˆ›å»ºä¼šè¯ â†’ ä¸Šä¼ å¤§åœ°å›¾ â†’ ä¸Šä¼ æˆ˜æ–—åœ°å›¾ â†’ å¯¼å…¥å‰§æœ¬                    â”‚
â”‚                                                                         â”‚
â”‚  é˜¶æ®µ2: ç©å®¶åŠ å…¥                                                        â”‚
â”‚    ç©å®¶å»ºç«‹è¿æ¥ â†’ åˆ›å»ºè§’è‰² â†’ è¿›å…¥æ¸¸æˆ                                   â”‚
â”‚                                                                         â”‚
â”‚  é˜¶æ®µ3: å¤§ä¸–ç•Œæ¸¸ç©                                                      â”‚
â”‚    å¯¹è¯äº¤äº’ â†’ å¤§åœ°å›¾ç§»åŠ¨ â†’ è¿›å…¥åœ°ç‚¹                                     â”‚
â”‚                                                                         â”‚
â”‚  é˜¶æ®µ4: æˆ˜æ–—åœ°å›¾                                                        â”‚
â”‚    è¿›å…¥æˆ˜æ–—åœ°å›¾ â†’ æˆ˜æ–— â†’ ç¦»å¼€æˆ˜æ–—åœ°å›¾                                   â”‚
â”‚                                                                         â”‚
â”‚  é˜¶æ®µ5: å¤šäººåä½œ                                                        â”‚
â”‚    å®æ—¶åŒæ­¥ â†’ å›åˆåˆ¶æˆ˜æ–— â†’ å…±äº«è§†é‡                                     â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### 4.2.2 é˜¶æ®µ1: DM åˆ›å»ºæˆ˜å½¹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åœºæ™¯: DM (Dungeon Master) æƒ³è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ D&D æˆ˜å½¹                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 1.1: åˆ›å»ºä¼šè¯
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
DM æ“ä½œ: åœ¨å‰ç«¯ç‚¹å‡»ã€Œåˆ›å»ºæˆ˜å½¹ã€ï¼Œå¡«å†™æˆ˜å½¹åç§°ã€æœ€å¤§ç©å®¶æ•°ã€è§„åˆ™é›†ç­‰

ç³»ç»Ÿè¡Œä¸º:
  â€¢ Client åˆ›å»ºä¼šè¯è®°å½•ï¼Œç”Ÿæˆå”¯ä¸€ä¼šè¯IDå’Œè¿æ¥å¯†é’¥
  â€¢ Client ä¸ MCP Server å»ºç«‹è¿æ¥
  â€¢ è¿”å›ä¼šè¯ä¿¡æ¯ç»™å‰ç«¯å±•ç¤º


Step 1.2: å¯¼å…¥å¤§åœ°å›¾
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
DM æ“ä½œ: ä¸Šä¼ ä¸–ç•Œåœ°å›¾æ–‡ä»¶ (UVTT æ ¼å¼)

ç³»ç»Ÿè¡Œä¸º:
  â€¢ Server è§£æåœ°å›¾æ–‡ä»¶ï¼Œæå–åœ°ç‚¹æ ‡è®°
  â€¢ Server å­˜å‚¨åœ°å›¾æ•°æ®å’Œåœ°ç‚¹åˆ—è¡¨
  â€¢ å‰ç«¯å±•ç¤ºå¤§åœ°å›¾é¢„è§ˆ

åœ°å›¾åŒ…å«:
  â€¢ åœ°å›¾å›¾åƒå’Œå°ºå¯¸
  â€¢ å¯è¿›å…¥çš„åœ°ç‚¹æ ‡è®°ï¼ˆåŸé•‡ã€åœ°ç‰¢ã€åœ°æ ‡ç­‰ï¼‰
  â€¢ åœ°ç‚¹ä¹‹é—´çš„è·ç¦»å…³ç³»


Step 1.3: å¯¼å…¥æˆ˜æ–—åœ°å›¾
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
DM æ“ä½œ: ä¸ºå¤§åœ°å›¾ä¸Šçš„åœ°ç‚¹ä¸Šä¼ è¯¦ç»†çš„æˆ˜æ–—åœ°å›¾

ç³»ç»Ÿè¡Œä¸º:
  â€¢ Server è§£ææˆ˜æ–—åœ°å›¾æ–‡ä»¶ï¼Œæå–ç½‘æ ¼ä¿¡æ¯
  â€¢ Server å°†æˆ˜æ–—åœ°å›¾å…³è”åˆ°å¤§åœ°å›¾åœ°ç‚¹
  â€¢ å‰ç«¯å±•ç¤ºæˆ˜æ–—åœ°å›¾é¢„è§ˆ

æˆ˜æ–—åœ°å›¾åŒ…å«:
  â€¢ æ ¼å­åŒ–åœ°å›¾ï¼ˆ5è‹±å°ºä¸€æ ¼ï¼‰
  â€¢ å¢™å£ã€éšœç¢ç‰©ã€åœ°å½¢ä¿¡æ¯
  â€¢ å¯æ”¾ç½® Token çš„ä½ç½®


Step 1.4: å¯¼å…¥å‰§æœ¬
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
DM æ“ä½œ: ä¸Šä¼ å‰§æœ¬æ–‡ä»¶ï¼Œå®šä¹‰æ•…äº‹èƒŒæ™¯ã€NPCã€é­é‡ã€å®è—ç­‰

ç³»ç»Ÿè¡Œä¸º:
  â€¢ Server å­˜å‚¨å‰§æœ¬æ•°æ®
  â€¢ å‰§æœ¬ä¾› AI DM å‚è€ƒç”Ÿæˆå™äº‹
  â€¢ å‰§æœ¬å®šä¹‰çš„é­é‡åœ¨å¯¹åº”åœ°ç‚¹è§¦å‘

å‰§æœ¬åŒ…å«:
  â€¢ æ•…äº‹èƒŒæ™¯å’Œç›®æ ‡
  â€¢ NPC ä¿¡æ¯ï¼ˆåå­—ã€è§’è‰²ã€å¯¹è¯ï¼‰
  â€¢ é­é‡äº‹ä»¶ï¼ˆåœ°ç‚¹ã€æ•Œäººã€è§¦å‘æ¡ä»¶ï¼‰
  â€¢ å®è—å’Œå¥–åŠ±


æ­¤æ—¶çŠ¶æ€:
  â”œâ”€ Client: ä¼šè¯è®°å½•å·²åˆ›å»º
  â”œâ”€ Server: åœ°å›¾ã€å‰§æœ¬å·²åŠ è½½
  â””â”€ ç­‰å¾…ç©å®¶åŠ å…¥...
```

---

#### 4.2.3 é˜¶æ®µ2: ç©å®¶åŠ å…¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åœºæ™¯: ç©å®¶ Alice å’Œ Bob æƒ³è¦åŠ å…¥ DM åˆ›å»ºçš„æˆ˜å½¹                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 2.1: ç©å®¶å»ºç«‹è¿æ¥
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ç©å®¶æ“ä½œ: è¾“å…¥ä¼šè¯IDå’Œå¯†é’¥ï¼Œç‚¹å‡»ã€ŒåŠ å…¥æ¸¸æˆã€

ç³»ç»Ÿè¡Œä¸º:
  â€¢ Client éªŒè¯ç©å®¶èº«ä»½å’Œä¼šè¯å¯†é’¥
  â€¢ å»ºç«‹å®æ—¶è¿æ¥ï¼ŒåŠ å…¥ä¼šè¯æˆ¿é—´
  â€¢ é€šçŸ¥æˆ¿é—´å†…å…¶ä»–ç©å®¶æœ‰æ–°äººåŠ å…¥
  â€¢ åŒæ­¥å½“å‰æ¸¸æˆçŠ¶æ€ç»™æ–°ç©å®¶


Step 2.2: ç©å®¶åˆ›å»ºè§’è‰²
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ç©å®¶ Alice å‘é€æ¶ˆæ¯: "æˆ‘æƒ³åˆ›å»ºä¸€ä¸ªç²¾çµæ¸¸ä¾ ï¼Œåå­—å«Legolas"

ç³»ç»Ÿè¡Œä¸º:
  â€¢ LLM è¯†åˆ«åˆ›å»ºè§’è‰²æ„å›¾
  â€¢ è°ƒç”¨ Server è§’è‰²ç®¡ç†èƒ½åŠ›ï¼Œåˆ›å»ºè§’è‰²
  â€¢ Server å­˜å‚¨è§’è‰²æ•°æ®ï¼Œåˆ†é…è§’è‰²ID
  â€¢ Client å­˜å‚¨å¯¹è¯æ¶ˆæ¯
  â€¢ å¹¿æ’­è§’è‰²åˆ›å»ºäº‹ä»¶ç»™æ‰€æœ‰ç©å®¶
  â€¢ AI ç”Ÿæˆè§’è‰²æè¿°å›å¤

è§’è‰²æ•°æ®åŒ…æ‹¬:
  â€¢ åŸºç¡€ä¿¡æ¯ï¼ˆåå­—ã€ç§æ—ã€èŒä¸šã€ç­‰çº§ï¼‰
  â€¢ å±æ€§å€¼å’ŒåŠ å€¼
  â€¢ ç”Ÿå‘½å€¼ã€æŠ¤ç”²ç­‰çº§
  â€¢ æŠ€èƒ½å’Œç‰¹é•¿


Step 2.3: æ›´å¤šç©å®¶åŠ å…¥
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ç©å®¶ Bob åŒæ ·æµç¨‹åˆ›å»ºè§’è‰² "Gimli" (çŸ®äººæˆ˜å£«)

ç³»ç»Ÿè¡Œä¸º:
  â€¢ æ‰€æœ‰ç©å®¶æ”¶åˆ°æ–°è§’è‰²åŠ å…¥é€šçŸ¥
  â€¢ é˜Ÿä¼ä¿¡æ¯å®æ—¶æ›´æ–°

æ­¤æ—¶çŠ¶æ€:
  â”œâ”€ ç©å®¶: Alice (Legolas), Bob (Gimli)
  â”œâ”€ ä½ç½®: å¤§åœ°å›¾èµ·å§‹ç‚¹
  â””â”€ å‡†å¤‡å¼€å§‹å†’é™©...
```

---

#### 4.2.4 é˜¶æ®µ3: å¤§ä¸–ç•Œæ¸¸ç©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åœºæ™¯: é˜Ÿä¼åœ¨å¤§åœ°å›¾ä¸Šæ—…è¡Œï¼Œæ¢ç´¢ä¸–ç•Œ                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 3.1: æŸ¥çœ‹å½“å‰ä½ç½®
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ç©å®¶: "æˆ‘ä»¬ç°åœ¨åœ¨å“ªï¼Ÿ"

ç³»ç»Ÿè¡Œä¸º:
  â€¢ LLM è¯†åˆ«æŸ¥è¯¢æ„å›¾
  â€¢ è°ƒç”¨ Server è·å–æ¸¸æˆçŠ¶æ€
  â€¢ AI æ•´åˆä½ç½®ã€æ—¶é—´ã€é˜Ÿä¼çŠ¶æ€ä¿¡æ¯ç”Ÿæˆå›å¤

è¿”å›ä¿¡æ¯:
  â€¢ å½“å‰æ‰€åœ¨åœ°å›¾å’Œåæ ‡
  â€¢ é™„è¿‘çš„å¯è¿›å…¥åœ°ç‚¹
  â€¢ æ¸¸æˆæ—¶é—´
  â€¢ é˜Ÿä¼æˆå‘˜åŠçŠ¶æ€


Step 3.2: å¤§åœ°å›¾æ—…è¡Œ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ç©å®¶: "æˆ‘ä»¬å»å¸ƒé›·é•‡"

ç³»ç»Ÿè¡Œä¸º:
  â€¢ LLM è¯†åˆ«ç§»åŠ¨æ„å›¾å’Œç›®æ ‡åœ°ç‚¹
  â€¢ è°ƒç”¨ Server æ—…è¡Œèƒ½åŠ›
  â€¢ Server è®¡ç®—æ—…è¡Œæ—¶é—´ï¼Œæ›´æ–°é˜Ÿä¼ä½ç½®
  â€¢ å¯èƒ½è§¦å‘éšæœºé­é‡äº‹ä»¶
  â€¢ å¹¿æ’­ä½ç½®æ›´æ–°ç»™æ‰€æœ‰ç©å®¶
  â€¢ AI ç”Ÿæˆæ—…è¡Œæè¿°

æ—…è¡Œå¤„ç†:
  â€¢ è®¡ç®—è·ç¦»å’Œæ¶ˆè€—æ—¶é—´
  â€¢ æ›´æ–°æ¸¸æˆæ—¶é—´
  â€¢ ç§»åŠ¨é˜Ÿä¼åˆ°ç›®æ ‡ä½ç½®
  â€¢ æ£€æŸ¥æ˜¯å¦è§¦å‘é­é‡


Step 3.3: å¤šäººå¯¹è¯äº¤äº’
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Alice: "æˆ‘çœ‹çœ‹å‘¨å›´æœ‰ä»€ä¹ˆäºº"
Bob:   "æˆ‘æƒ³æ‰¾ä¸ªé…’é¦†"

ç³»ç»Ÿè¡Œä¸º:
  â€¢ è®°å½•æ‰€æœ‰ç©å®¶çš„æ¶ˆæ¯
  â€¢ LLM ç»¼åˆå¤„ç†å¤šä¸ªè¯·æ±‚
  â€¢ å¯èƒ½è°ƒç”¨å¤šä¸ª Server èƒ½åŠ›
  â€¢ å“åº”é€šè¿‡å®æ—¶è¿æ¥æ¨é€ç»™æ‰€æœ‰ç©å®¶


æ­¤æ—¶çŠ¶æ€:
  â”œâ”€ ä½ç½®: å¸ƒé›·é•‡ (å¤§åœ°å›¾)
  â”œâ”€ æ¸¸æˆæ—¶é—´: ç¬¬2å¤©
  â””â”€ å‡†å¤‡è¿›å…¥æˆ˜æ–—åœ°å›¾...
```

---

#### 4.2.5 é˜¶æ®µ4: è¿›å…¥æˆ˜æ–—åœ°å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åœºæ™¯: é˜Ÿä¼è¿›å…¥è·ƒé©¬æ—…åº—ï¼Œé­é‡æ•Œäºº                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 4.1: è¿›å…¥æˆ˜æ–—åœ°å›¾
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ç©å®¶: "æˆ‘ä»¬è¿›æ—…åº—çœ‹çœ‹"

ç³»ç»Ÿè¡Œä¸º:
  â€¢ LLM è¯†åˆ«è¿›å…¥åœ°ç‚¹æ„å›¾
  â€¢ è°ƒç”¨ Server åˆ‡æ¢åˆ°æˆ˜æ–—åœ°å›¾
  â€¢ Server åŠ è½½æˆ˜æ–—åœ°å›¾ï¼Œæ”¾ç½®è§’è‰² Token
  â€¢ å¹¿æ’­æˆ˜æ–—åœ°å›¾æ•°æ®ç»™æ‰€æœ‰ç©å®¶
  â€¢ å‰ç«¯åˆ‡æ¢åˆ°æˆ˜æ–—åœ°å›¾è§†å›¾

æˆ˜æ–—åœ°å›¾æ•°æ®:
  â€¢ åœ°å›¾åç§°å’Œç½‘æ ¼å°ºå¯¸
  â€¢ æ‰€æœ‰è§’è‰² Token ä½ç½®
  â€¢ NPC ä½ç½®
  â€¢ åœ°å½¢ä¿¡æ¯


Step 4.2: è§¦å‘æˆ˜æ–—
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
DM æˆ–å‰§æœ¬è§¦å‘: å“¥å¸ƒæ—çªç„¶ä»åé—¨å†²è¿›æ¥ï¼

ç³»ç»Ÿè¡Œä¸º:
  â€¢ è°ƒç”¨ Server æˆ˜æ–—èƒ½åŠ›ï¼Œå‘èµ·æˆ˜æ–—
  â€¢ Server åˆ›å»ºæ•Œäºº Tokenï¼Œè®¡ç®—å…ˆæ”»
  â€¢ ç¡®å®šå›åˆé¡ºåº
  â€¢ å¹¿æ’­æˆ˜æ–—å¼€å§‹äº‹ä»¶å’Œå›åˆé¡ºåº
  â€¢ AI æè¿°æˆ˜æ–—å¼€åœº

æˆ˜æ–—åˆå§‹åŒ–:
  â€¢ æ·»åŠ æ‰€æœ‰å‚æˆ˜è€…ï¼ˆç©å®¶è§’è‰² + æ•Œäººï¼‰
  â€¢ ä¸ºæ¯ä¸ªå‚æˆ˜è€…æŠ•æ·å…ˆæ”»
  â€¢ æŒ‰å…ˆæ”»å€¼æ’åºç¡®å®šå›åˆé¡ºåº
  â€¢ æ ‡è®°å½“å‰å›åˆè§’è‰²


Step 4.3: å›åˆåˆ¶æˆ˜æ–— (å¤šäºº)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Legolas çš„å›åˆ:
  Alice: "æˆ‘å°„ç®­æ”»å‡»ç¬¬ä¸€ä¸ªå“¥å¸ƒæ—"

  ç³»ç»Ÿè¡Œä¸º:
    â€¢ LLM è¯†åˆ«æ”»å‡»æ„å›¾å’Œç›®æ ‡
    â€¢ è°ƒç”¨ Server æ”»å‡»èƒ½åŠ›
    â€¢ Server æŠ•æ·å‘½ä¸­éª°ï¼Œè®¡ç®—ä¼¤å®³ï¼Œæ›´æ–°ç›®æ ‡HP
    â€¢ å¹¿æ’­æ”»å‡»ç»“æœç»™æ‰€æœ‰ç©å®¶
    â€¢ AI æè¿°æ”»å‡»è¿‡ç¨‹å’Œç»“æœ
    â€¢ æ¨è¿›åˆ°ä¸‹ä¸€å›åˆ


Gimli çš„å›åˆ:
  Bob: "æˆ‘å†²ä¸Šå»ç ç¬¬äºŒä¸ªå“¥å¸ƒæ—"

  ç³»ç»Ÿè¡Œä¸º:
    â€¢ å…ˆè°ƒç”¨ç§»åŠ¨èƒ½åŠ›ï¼Œæ›´æ–° Token ä½ç½®
    â€¢ å†è°ƒç”¨æ”»å‡»èƒ½åŠ›
    â€¢ æ‰€æœ‰ç©å®¶çœ‹åˆ° Gimli ç§»åŠ¨å¹¶æ”»å‡»
    â€¢ æ¨è¿›åˆ°ä¸‹ä¸€å›åˆ


Step 4.4: æˆ˜æ–—ç»“æŸ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ‰€æœ‰æ•Œäººè¢«å‡»è´¥å:

ç³»ç»Ÿè¡Œä¸º:
  â€¢ è°ƒç”¨ Server ç»“æŸæˆ˜æ–—
  â€¢ Server è®¡ç®—ç»éªŒå’Œæˆ˜åˆ©å“
  â€¢ å¹¿æ’­æˆ˜æ–—ç»“æŸäº‹ä»¶
  â€¢ AI æè¿°æˆ˜æ–—èƒœåˆ©åœºæ™¯

æˆ˜æ–—ç»“ç®—:
  â€¢ ç»Ÿè®¡æˆ˜æ–—ç»“æœ
  â€¢ åˆ†é…ç»éªŒå€¼
  â€¢ ç”Ÿæˆæˆ˜åˆ©å“åˆ—è¡¨
  â€¢ è®°å½•æˆ˜æ–—æ—¥å¿—


æ­¤æ—¶çŠ¶æ€:
  â”œâ”€ ä½ç½®: è·ƒé©¬æ—…åº— (æˆ˜æ–—åœ°å›¾)
  â”œâ”€ æˆ˜æ–—: å·²ç»“æŸ
  â””â”€ å¯ä»¥ç»§ç»­æ¢ç´¢æˆ–ç¦»å¼€...
```

---

#### 4.2.6 é˜¶æ®µ5: ç¦»å¼€æˆ˜æ–—åœ°å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åœºæ™¯: æˆ˜æ–—ç»“æŸï¼Œé˜Ÿä¼ç»§ç»­å†’é™©                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 5.1: ç¦»å¼€æˆ˜æ–—åœ°å›¾
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ç©å®¶: "æˆ‘ä»¬ç¦»å¼€æ—…åº—"

ç³»ç»Ÿè¡Œä¸º:
  â€¢ LLM è¯†åˆ«ç¦»å¼€æ„å›¾
  â€¢ è°ƒç”¨ Server é€€å‡ºæˆ˜æ–—åœ°å›¾
  â€¢ Server æ›´æ–°é˜Ÿä¼ä½ç½®åˆ°å¤§åœ°å›¾
  â€¢ å‰ç«¯åˆ‡æ¢å›å¤§åœ°å›¾è§†å›¾
  â€¢ åŒæ­¥æ‰€æœ‰ç©å®¶ä½ç½®


Step 5.2: ç»§ç»­å†’é™©
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ç©å®¶: "æˆ‘ä»¬å»å¹½æš—æ£®æ—"

ç³»ç»Ÿè¡Œä¸º:
  â€¢ é‡å¤å¤§åœ°å›¾æ—…è¡Œæµç¨‹
  â€¢ å¯èƒ½è§¦å‘æ–°çš„é­é‡...
  â€¢ æ¸¸æˆæŒç»­è¿›è¡Œ
```

---

#### 4.2.7 å¤šäººå®æ—¶åŒæ­¥æœºåˆ¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        å¤šäººåŒæ­¥æ¶æ„                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚           MCP Client                â”‚
                    â”‚                                     â”‚
                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
                    â”‚  â”‚       å®æ—¶é€šä¿¡ä¸­å¿ƒ           â”‚   â”‚
                    â”‚  â”‚                             â”‚   â”‚
                    â”‚  â”‚  ä¼šè¯æˆ¿é—´:                  â”‚   â”‚
                    â”‚  â”‚    â”œâ”€ Alice (Legolas)       â”‚   â”‚
                    â”‚  â”‚    â”œâ”€ Bob (Gimli)           â”‚   â”‚
                    â”‚  â”‚    â””â”€ DM                    â”‚   â”‚
                    â”‚  â”‚                             â”‚   â”‚
                    â”‚  â”‚  åŒæ­¥å†…å®¹:                  â”‚   â”‚
                    â”‚  â”‚    â€¢ å¯¹è¯æ¶ˆæ¯               â”‚   â”‚
                    â”‚  â”‚    â€¢ åœ°å›¾çŠ¶æ€               â”‚   â”‚
                    â”‚  â”‚    â€¢ Token ä½ç½®             â”‚   â”‚
                    â”‚  â”‚    â€¢ æˆ˜æ–—äº‹ä»¶               â”‚   â”‚
                    â”‚  â”‚    â€¢ å›åˆçŠ¶æ€               â”‚   â”‚
                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åŒæ­¥äº‹ä»¶ç±»å‹:
  â”œâ”€ å¯¹è¯æ¶ˆæ¯          ç©å®¶/DM å‘è¨€
  â”œâ”€ è§’è‰²åˆ›å»º          æ–°è§’è‰²åŠ å…¥
  â”œâ”€ ä½ç½®æ›´æ–°          é˜Ÿä¼åœ¨å¤§åœ°å›¾ç§»åŠ¨
  â”œâ”€ åœ°å›¾åˆ‡æ¢          è¿›å…¥/ç¦»å¼€æˆ˜æ–—åœ°å›¾
  â”œâ”€ Token ç§»åŠ¨        æˆ˜æ–—åœ°å›¾ä¸Šçš„ä½ç½®å˜åŒ–
  â”œâ”€ æˆ˜æ–—å¼€å§‹          é­é‡è§¦å‘
  â”œâ”€ å›åˆå˜æ›´          å½“å‰è¡ŒåŠ¨è€…å˜åŒ–
  â”œâ”€ æ”»å‡»ç»“æœ          å‘½ä¸­/ä¼¤å®³/çŠ¶æ€å˜åŒ–
  â”œâ”€ ç”Ÿå‘½å€¼å˜åŒ–        HP æ›´æ–°
  â””â”€ æˆ˜æ–—ç»“æŸ          æˆ˜æ–—ç»“ç®—

åŒæ­¥ä¿è¯:
  â€¢ æ‰€æœ‰äº‹ä»¶å®æ—¶æ¨é€
  â€¢ æˆ˜æ–—åœ°å›¾çŠ¶æ€ç”± Server ç®¡ç†
  â€¢ å›åˆåˆ¶ç¡®ä¿æœ‰åºè¡ŒåŠ¨
  â€¢ æ–­çº¿é‡è¿ååŒæ­¥æœ€æ–°çŠ¶æ€
```

---

#### 4.2.8 å®Œæ•´æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           å®Œæ•´æ¸¸æˆæµç¨‹                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

     DM                              Server                          ç©å®¶
      â”‚                                â”‚                              â”‚
      â”‚  1. åˆ›å»ºä¼šè¯                   â”‚                              â”‚
      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>                              â”‚
      â”‚                                â”‚                              â”‚
      â”‚  2. å¯¼å…¥å¤§åœ°å›¾                 â”‚                              â”‚
      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>                              â”‚
      â”‚                                â”‚                              â”‚
      â”‚  3. å¯¼å…¥æˆ˜æ–—åœ°å›¾               â”‚                              â”‚
      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>                              â”‚
      â”‚                                â”‚                              â”‚
      â”‚  4. å¯¼å…¥å‰§æœ¬                   â”‚                              â”‚
      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>                              â”‚
      â”‚                                â”‚                              â”‚
      â”‚                                â”‚   5. å»ºç«‹å®æ—¶è¿æ¥            â”‚
      â”‚                                â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
      â”‚                                â”‚                              â”‚
      â”‚                                â”‚   6. åˆ›å»ºè§’è‰²                â”‚
      â”‚                                â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
      â”‚                                â”‚                              â”‚
      â”‚  7. å¹¿æ’­: ç©å®¶åŠ å…¥             â”‚                              â”‚
      â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
      â”‚                                â”‚                              â”‚
      â”‚                                â”‚   8. å¯¹è¯/ç§»åŠ¨è¯·æ±‚           â”‚
      â”‚                                â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
      â”‚                                â”‚                              â”‚
      â”‚                                â”‚  9. è°ƒç”¨ Server èƒ½åŠ›         â”‚
      â”‚                                â”‚ â”€â”€â”€â”€â”€â”€â”                      â”‚
      â”‚                                â”‚       â”‚                      â”‚
      â”‚                                â”‚ <â”€â”€â”€â”€â”€â”˜                      â”‚
      â”‚                                â”‚                              â”‚
      â”‚  10. å¹¿æ’­: çŠ¶æ€æ›´æ–°            â”‚                              â”‚
      â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
      â”‚                                â”‚                              â”‚
      â”‚                                â”‚   11. è¿›å…¥æˆ˜æ–—åœ°å›¾           â”‚
      â”‚                                â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
      â”‚                                â”‚                              â”‚
      â”‚  12. å¹¿æ’­: æˆ˜æ–—åœ°å›¾æ•°æ®        â”‚                              â”‚
      â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
      â”‚                                â”‚                              â”‚
      â”‚                                â”‚   13. æˆ˜æ–—è¡ŒåŠ¨               â”‚
      â”‚                                â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
      â”‚                                â”‚                              â”‚
      â”‚  14. å¹¿æ’­: æˆ˜æ–—ç»“æœ/å›åˆå˜æ›´   â”‚                              â”‚
      â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
      â”‚                                â”‚                              â”‚
      â”‚             ... æ¸¸æˆæŒç»­ ...    â”‚                              â”‚
      â”‚                                â”‚                              â”‚
```

---

## äº”ã€éƒ¨ç½²æ¶æ„

### 5.1 å•æœºéƒ¨ç½²

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ä¸»æœº                                   â”‚
â”‚                                                                 â”‚
â”‚  Redis :6379      PostgreSQL :5432      å‰ç«¯ :3000             â”‚
â”‚                                                                 â”‚
â”‚  MCP Server :9000              MCP Client :8080                â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å¯åŠ¨é¡ºåº:
  1. Redis / PostgreSQL
  2. MCP Server (ä¾èµ– Redis/PG)
  3. MCP Client (ä¾èµ– Redis/PG + MCP Server)
  4. å‰ç«¯ (ä¾èµ– MCP Client)
```

### 5.2 ç¯å¢ƒé…ç½®

```bash
# MCP Server
MCP_SERVER_PORT=9000
MCP_SERVER_STORAGE=redis://localhost:6379

# MCP Client
HTTP_PORT=8080
REDIS_HOST=localhost:6379
DATABASE_URL=postgres://localhost/dnd_client
MCP_SERVER_URL=http://localhost:9000
LLM_API_KEY=sk-xxx
```

---

## å…­ã€æ‰©å±•æ€§

### 6.1 å¤š Server æ”¯æŒ

```
ä¸€ä¸ª Client å¯è¿æ¥å¤šä¸ª Serverï¼ˆä¸åŒè§„åˆ™é›†ï¼‰:

  Client â”€â”€â”¬â”€â”€â†’ D&D 5e Server
           â”œâ”€â”€â†’ D&D 3.5e Server
           â””â”€â”€â†’ è‡ªå®šä¹‰è§„åˆ™ Server
```

### 6.2 Server ç‹¬ç«‹ä½¿ç”¨

```
Server å¯è¢«å…¶ä»– MCP Client è°ƒç”¨:

  æœ¬é¡¹ç›® Client â”€â”€â”
  Claude Desktop â”€â”€â”¼â”€â”€â†’ DND MCP Server
  å…¶ä»– AI Agent  â”€â”€â”˜
```

---

## ä¸ƒã€ä¸‹ä¸€æ­¥

1. **Server è¯¦ç»†è®¾è®¡** - å„æ¨¡å—æ•°æ®æ¨¡å‹å’Œ API ç»†èŠ‚
2. **UVTT è§£æå™¨** - åœ°å›¾æ–‡ä»¶å¯¼å…¥
3. **Client-Server é›†æˆ** - MCP åè®®å¯¹æ¥
4. **é™æ€æ•°æ®** - æ³•æœ¯/ç‰©å“æ•°æ®åº“
